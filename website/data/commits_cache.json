{"repoInfo":{"id":689025648,"node_id":"R_kgDOKRGycA","name":"documents","full_name":"controlorigins\/documents","private":false,"owner":{"login":"controlorigins","id":87741701,"node_id":"MDEyOk9yZ2FuaXphdGlvbjg3NzQxNzAx","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/87741701?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/controlorigins","html_url":"https:\/\/github.com\/controlorigins","followers_url":"https:\/\/api.github.com\/users\/controlorigins\/followers","following_url":"https:\/\/api.github.com\/users\/controlorigins\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/controlorigins\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/controlorigins\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/controlorigins\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/controlorigins\/orgs","repos_url":"https:\/\/api.github.com\/users\/controlorigins\/repos","events_url":"https:\/\/api.github.com\/users\/controlorigins\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/controlorigins\/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https:\/\/github.com\/controlorigins\/documents","description":"A Place to store Documentation","fork":false,"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents","forks_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/forks","keys_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/keys{\/key_id}","collaborators_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/collaborators{\/collaborator}","teams_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/teams","hooks_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/hooks","issue_events_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/issues\/events{\/number}","events_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/events","assignees_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/assignees{\/user}","branches_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/branches{\/branch}","tags_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/tags","blobs_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/blobs{\/sha}","git_tags_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/tags{\/sha}","git_refs_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/refs{\/sha}","trees_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees{\/sha}","statuses_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/statuses\/{sha}","languages_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/languages","stargazers_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/stargazers","contributors_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contributors","subscribers_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/subscribers","subscription_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/subscription","commits_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits{\/sha}","git_commits_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits{\/sha}","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/comments{\/number}","issue_comment_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/issues\/comments{\/number}","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/{+path}","compare_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/compare\/{base}...{head}","merges_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/merges","archive_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/{archive_format}{\/ref}","downloads_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/downloads","issues_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/issues{\/number}","pulls_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/pulls{\/number}","milestones_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/milestones{\/number}","notifications_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/notifications{?since,all,participating}","labels_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/labels{\/name}","releases_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/releases{\/id}","deployments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/deployments","created_at":"2023-09-08T16:08:13Z","updated_at":"2025-08-09T22:14:15Z","pushed_at":"2025-08-09T22:14:11Z","git_url":"git:\/\/github.com\/controlorigins\/documents.git","ssh_url":"git@github.com:controlorigins\/documents.git","clone_url":"https:\/\/github.com\/controlorigins\/documents.git","svn_url":"https:\/\/github.com\/controlorigins\/documents","homepage":"https:\/\/controlorigins-docs.azurewebsites.net\/","size":2249,"stargazers_count":0,"watchers_count":0,"language":"PHP","has_issues":false,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https:\/\/api.github.com\/licenses\/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["documentation","gpt","php"],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main","temp_clone_token":null,"custom_properties":[],"organization":{"login":"controlorigins","id":87741701,"node_id":"MDEyOk9yZ2FuaXphdGlvbjg3NzQxNzAx","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/87741701?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/controlorigins","html_url":"https:\/\/github.com\/controlorigins","followers_url":"https:\/\/api.github.com\/users\/controlorigins\/followers","following_url":"https:\/\/api.github.com\/users\/controlorigins\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/controlorigins\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/controlorigins\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/controlorigins\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/controlorigins\/orgs","repos_url":"https:\/\/api.github.com\/users\/controlorigins\/repos","events_url":"https:\/\/api.github.com\/users\/controlorigins\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/controlorigins\/received_events","type":"Organization","user_view_type":"public","site_admin":false},"network_count":0,"subscribers_count":1},"commits":[{"sha":"9e71d599a75409c00ab0ad06422b8ce4bb3483d3","node_id":"C_kwDOKRGycNoAKDllNzFkNTk5YTc1NDA5YzAwYWIwYWQwNjQyMmI4Y2U0YmIzNDgzZDM","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T22:13:59Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T22:13:59Z"},"message":"Fix: Enhanced client-side routing for Azure App Service 404 issues\n\n- Improved index.html routing to properly convert \/doc\/ URLs to file parameters\n- Added path-to-file conversion logic for proper document routing\n- Enhanced debugging and console logging for troubleshooting\n\nThis should resolve the nginx 404 issues by handling routing client-side\nbefore requests reach the problematic Azure App Service nginx config.","tree":{"sha":"6e70e9185c5508592d605d59b119293a77bd5cf0","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/6e70e9185c5508592d605d59b119293a77bd5cf0"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e"}],"details":{"sha":"9e71d599a75409c00ab0ad06422b8ce4bb3483d3","node_id":"C_kwDOKRGycNoAKDllNzFkNTk5YTc1NDA5YzAwYWIwYWQwNjQyMmI4Y2U0YmIzNDgzZDM","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T22:13:59Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T22:13:59Z"},"message":"Fix: Enhanced client-side routing for Azure App Service 404 issues\n\n- Improved index.html routing to properly convert \/doc\/ URLs to file parameters\n- Added path-to-file conversion logic for proper document routing\n- Enhanced debugging and console logging for troubleshooting\n\nThis should resolve the nginx 404 issues by handling routing client-side\nbefore requests reach the problematic Azure App Service nginx config.","tree":{"sha":"6e70e9185c5508592d605d59b119293a77bd5cf0","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/6e70e9185c5508592d605d59b119293a77bd5cf0"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e"}],"stats":{"total":44,"additions":33,"deletions":11},"files":[{"sha":"7aebea477b84982ec06fd56274525ce04c436dbd","filename":"website\/index.html","status":"modified","additions":33,"deletions":11,"changes":44,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3\/website%2Findex.html","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/9e71d599a75409c00ab0ad06422b8ce4bb3483d3\/website%2Findex.html","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2Findex.html?ref=9e71d599a75409c00ab0ad06422b8ce4bb3483d3","patch":"@@ -5,23 +5,45 @@\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" \/>\n     <title>Loading...<\/title>\n     <script>\n-      \/\/ Enhanced routing fallback for Azure App Service\n+      \/\/ Enhanced routing fallback for Azure App Service - Updated approach\n       (function () {\n         const path = window.location.pathname;\n         const search = window.location.search;\n         const hash = window.location.hash;\n \n-        console.log('Routing check - Path:', path, 'Search:', search);\n+        console.log('Routing check - Path:', path, 'Search:', search, 'Hash:', hash);\n \n-        \/\/ If this is a \/doc\/ URL, redirect to index.php with the path as a parameter\n+        \/\/ Don't redirect if we're already on the right page\n+        if (search.includes('page=') || search.includes('file=')) {\n+          console.log('Already has page\/file parameters, not redirecting');\n+          return;\n+        }\n+\n+        \/\/ If this is a \/doc\/ URL, convert to proper page parameter\n         if (path.match(\/^\\\/doc(\\\/.*)?$\/i)) {\n-          const newUrl =\n-            '\/index.php?path=' +\n-            encodeURIComponent(path) +\n-            (search ? '&' + search.substring(1) : '') +\n-            hash;\n-          console.log('Redirecting to:', newUrl);\n-          window.location.replace(newUrl);\n+          let docPath = path.replace(\/^\\\/doc\\\/?\/, '');\n+          if (docPath === '') {\n+            \/\/ Root doc URL goes to document viewer\n+            const newUrl = '\/index.php?page=document_view' + hash;\n+            console.log('Doc root redirect to:', newUrl);\n+            window.location.replace(newUrl);\n+          } else {\n+            \/\/ Convert path to file parameter\n+            \/\/ Convert \/doc\/chatgpt\/sessions\/create-php-joke-page to ChatGPT\/Sessions\/Create PHP Joke Page.md\n+            const pathSegments = docPath.split('\/');\n+            const convertedSegments = pathSegments.map(segment => {\n+              \/\/ Convert kebab-case to Title Case with spaces\n+              return segment\n+                .split('-')\n+                .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n+                .join(' ');\n+            });\n+            const filePath = convertedSegments.join('\/') + '.md';\n+            \n+            const newUrl = '\/index.php?page=document_view&file=' + encodeURIComponent(filePath) + hash;\n+            console.log('Doc file redirect to:', newUrl, 'File:', filePath);\n+            window.location.replace(newUrl);\n+          }\n           return;\n         }\n \n@@ -33,7 +55,7 @@\n           return;\n         }\n \n-        \/\/ For any other unmatched paths, try routing through PHP\n+        \/\/ For any other unmatched paths, try routing through PHP with path parameter\n         const newUrl =\n           '\/index.php?path=' +\n           encodeURIComponent(path) +"}]}},{"sha":"0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","node_id":"C_kwDOKRGycNoAKDBhZGQ4YzVkNjJhYTBkZGMzYmYzNmMwYzdkM2JhYWExNjRiMDlkMWU","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:56:05Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:56:05Z"},"message":"Add versioning system with automated build information; update Azure pipeline and configuration files","tree":{"sha":"303da5055b84ca15484ffe2569980aa1497f24c4","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/303da5055b84ca15484ffe2569980aa1497f24c4"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"0b9682a811cf9b47587ba19fed5e2259dcb85559","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0b9682a811cf9b47587ba19fed5e2259dcb85559","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0b9682a811cf9b47587ba19fed5e2259dcb85559"}],"details":{"sha":"0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","node_id":"C_kwDOKRGycNoAKDBhZGQ4YzVkNjJhYTBkZGMzYmYzNmMwYzdkM2JhYWExNjRiMDlkMWU","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:56:05Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:56:05Z"},"message":"Add versioning system with automated build information; update Azure pipeline and configuration files","tree":{"sha":"303da5055b84ca15484ffe2569980aa1497f24c4","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/303da5055b84ca15484ffe2569980aa1497f24c4"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"0b9682a811cf9b47587ba19fed5e2259dcb85559","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0b9682a811cf9b47587ba19fed5e2259dcb85559","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0b9682a811cf9b47587ba19fed5e2259dcb85559"}],"stats":{"total":223,"additions":213,"deletions":10},"files":[{"sha":"6c4d6b5fceb79ecc06665bb2d68a49b733892547","filename":"azure-pipelines.yml","status":"modified","additions":10,"deletions":9,"changes":19,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/azure-pipelines.yml","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/azure-pipelines.yml","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/azure-pipelines.yml?ref=0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","patch":"@@ -1,11 +1,5 @@\n # PHP as Linux Web App on Azure\n-# Build, package and deploy your PHP project to Azure Linux Web A                      # Configure the router as startup file and set routing mode\n-                      az webapp config set \\\n-                        --name $(webAppName) \\\n-                        --resource-group rg-controlorigins-docs \\\n-                        --startup-file \"router.php\" \\\n-                        --linux-fx-version \"PHP|8.4\" Add steps that run tests and more:\n-# https:\/\/docs.microsoft.com\/azure\/devops\/pipelines\/languages\/php\n+# Build, package and deploy your PHP project to Azure Linux Web App\n \n trigger:\n   - main\n@@ -46,6 +40,12 @@ stages:\n             workingDirectory: $(rootFolder)\n             displayName: 'Use PHP version $(phpVersion)'\n \n+          - script: |\n+              echo \"Updating version information...\"\n+              node scripts\/update-version.js\n+            workingDirectory: $(rootFolder)\n+            displayName: 'Update Version File'\n+\n           - script: composer install --no-interaction --prefer-dist\n             workingDirectory: $(rootFolder)\n             displayName: 'Composer install'\n@@ -80,6 +80,7 @@ stages:\n                   displayName: 'Deploy Azure Web App : controlorigins-docs'\n                   inputs:\n                     azureSubscription: $(azureSubscription)\n+                    appType: 'webAppLinux'\n                     appName: $(webAppName)\n                     package: $(Pipeline.Workspace)\/drop\/$(Build.BuildId).zip\n \n@@ -93,7 +94,7 @@ stages:\n                     scriptLocation: 'inlineScript'\n                     inlineScript: |\n                       echo \"Configuring App Service settings...\"\n-                      \n+\n                       # Enable URL rewriting and configure PHP settings\n                       az webapp config appsettings set \\\n                         --name $(webAppName) \\\n@@ -118,5 +119,5 @@ stages:\n                         --name $(webAppName) \\\n                         --resource-group rg-controlorigins-docs \\\n                         || echo \"Failed to restart app\"\n-                      \n+\n                       echo \"Configuration completed\""},{"sha":"bf182f1100b8bdf52c5fcdf974370fcede6ccaee","filename":"package.json","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/package.json","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/package.json","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/package.json?ref=0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","patch":"@@ -1,13 +1,14 @@\n {\n   \"name\": \"documents\",\n-  \"version\": \"1.0.0\",\n+  \"version\": \"1.2.0\",\n   \"description\": \"PHPDocSpark documentation platform by Mark Hazleton\",\n   \"main\": \"index.js\",\n   \"engines\": {\n     \"node\": \">=18.0.0\",\n     \"npm\": \">=8.0.0\"\n   },\n   \"scripts\": {\n+    \"update-version\": \"node scripts\/update-version.js\",\n     \"dev\": \"vite build --watch\",\n     \"dev:serve\": \"concurrently \\\"npm run dev\\\" \\\"npm run serve\\\"\",\n     \"build\": \"node scripts\/build.js\","},{"sha":"3233e1c0853bdf1c1a73a546c0ff0ece6c2478b5","filename":"scripts\/update-version.js","status":"added","additions":115,"deletions":0,"changes":115,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/scripts%2Fupdate-version.js","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/scripts%2Fupdate-version.js","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/scripts%2Fupdate-version.js?ref=0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","patch":"@@ -0,0 +1,115 @@\n+#!\/usr\/bin\/env node\n+\n+\/**\n+ * Build Script - Updates version information\n+ * This script is run during the Azure DevOps build process\n+ *\/\n+\n+const fs = require('fs');\n+const path = require('path');\n+const { execSync } = require('child_process');\n+\n+\/\/ Configuration\n+const VERSION_FILE = path.join(__dirname, '..\/website\/includes\/version.php');\n+const PACKAGE_JSON = path.join(__dirname, '..\/package.json');\n+\n+\/\/ Read current version from package.json\n+let packageVersion = '1.2.0';\n+try {\n+    if (fs.existsSync(PACKAGE_JSON)) {\n+        const pkg = JSON.parse(fs.readFileSync(PACKAGE_JSON, 'utf8'));\n+        packageVersion = pkg.version || '1.2.0';\n+    }\n+} catch (error) {\n+    console.log('Warning: Could not read package.json version, using default');\n+}\n+\n+\/\/ Get build number from environment or increment\n+let buildNumber = process.env.BUILD_BUILDNUMBER || process.env.GITHUB_RUN_NUMBER || '1';\n+if (buildNumber.includes('.')) {\n+    \/\/ If it's a full build number like \"20250809.1\", extract the last part\n+    buildNumber = buildNumber.split('.').pop();\n+}\n+\n+\/\/ Get Git commit hash\n+let gitCommit = 'unknown';\n+try {\n+    gitCommit = execSync('git rev-parse HEAD', { encoding: 'utf8' }).trim();\n+} catch (error) {\n+    try {\n+        gitCommit = execSync('git rev-parse --short HEAD', { encoding: 'utf8' }).trim();\n+    } catch (error2) {\n+        console.log('Warning: Could not get git commit hash');\n+    }\n+}\n+\n+\/\/ Generate timestamp\n+const buildTimestamp = new Date().toISOString().replace('T', ' ').replace(\/\\.\\d{3}Z$\/, '');\n+\n+\/\/ Generate version.php content\n+const versionContent = `<?php\n+\/**\n+ * Version and Build Information\n+ * This file is automatically updated during the build process\n+ * Last updated: ${buildTimestamp}\n+ *\/\n+\n+\/\/ Version number (from package.json)\n+define('SITE_VERSION', '${packageVersion}');\n+\n+\/\/ Build timestamp (updated automatically by build process)\n+define('SITE_BUILD_TIMESTAMP', '${buildTimestamp}');\n+\n+\/\/ Build number (from Azure DevOps or GitHub Actions)\n+define('SITE_BUILD_NUMBER', '${buildNumber}');\n+\n+\/\/ Git commit hash (if available)\n+define('SITE_GIT_COMMIT', '${gitCommit}');\n+\n+\/**\n+ * Get formatted build information\n+ *\/\n+function getSiteBuildInfo(): array {\n+    return [\n+        'version' => SITE_VERSION,\n+        'build_number' => SITE_BUILD_NUMBER,\n+        'build_date' => SITE_BUILD_TIMESTAMP,\n+        'git_commit' => SITE_GIT_COMMIT,\n+        'formatted_date' => date('M j, Y \\\\\\\\a\\\\\\\\t g:i A T', strtotime(SITE_BUILD_TIMESTAMP)),\n+        'short_commit' => substr(SITE_GIT_COMMIT, 0, 7)\n+    ];\n+}\n+\n+\/**\n+ * Get version string for display\n+ *\/\n+function getSiteVersionString(): string {\n+    $info = getSiteBuildInfo();\n+    return \"v{$info['version']}.{$info['build_number']}\";\n+}\n+\n+\/**\n+ * Get full build string for footer\n+ *\/\n+function getSiteBuildString(): string {\n+    $info = getSiteBuildInfo();\n+    if ($info['git_commit'] !== 'unknown') {\n+        return \"v{$info['version']}.{$info['build_number']} ({$info['short_commit']}) - Built on {$info['formatted_date']}\";\n+    } else {\n+        return \"v{$info['version']}.{$info['build_number']} - Built on {$info['formatted_date']}\";\n+    }\n+}\n+?>`;\n+\n+\/\/ Write the version file\n+try {\n+    fs.writeFileSync(VERSION_FILE, versionContent, 'utf8');\n+    console.log(`\u2705 Version file updated:`);\n+    console.log(`   Version: ${packageVersion}`);\n+    console.log(`   Build: ${buildNumber}`);\n+    console.log(`   Commit: ${gitCommit.substring(0, 7)}`);\n+    console.log(`   Timestamp: ${buildTimestamp}`);\n+} catch (error) {\n+    console.error('\u274c Failed to write version file:', error.message);\n+    process.exit(1);\n+}"},{"sha":"64a0f7f5d3b9922298783d2514da27c0eee0d899","filename":"website\/includes\/config.php","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/website%2Fincludes%2Fconfig.php","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/website%2Fincludes%2Fconfig.php","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2Fincludes%2Fconfig.php?ref=0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","patch":"@@ -2,6 +2,9 @@\n \/\/ Global configuration for PHPDocSpark\n $CANONICAL_BASE = 'https:\/\/phpdocspark.markhazleton.com'; \/\/ Long-term canonical domain\n \n+\/\/ Load version information\n+require_once __DIR__ . '\/version.php';\n+\n \/\/ Brand constants\n define('PHPSPARK_BRAND', 'PHPDocSpark by Mark Hazleton');\n define('PHPSPARK_SHORT', 'PHPDocSpark');"},{"sha":"4062777aaa3eb93318b5cb64691946e053ab4cc2","filename":"website\/includes\/version.php","status":"added","additions":53,"deletions":0,"changes":53,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/website%2Fincludes%2Fversion.php","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/website%2Fincludes%2Fversion.php","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2Fincludes%2Fversion.php?ref=0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","patch":"@@ -0,0 +1,53 @@\n+<?php\n+\/**\n+ * Version and Build Information\n+ * This file is automatically updated during the build process\n+ * Last updated: 2025-08-09 21:54:48\n+ *\/\n+\n+\/\/ Version number (from package.json)\n+define('SITE_VERSION', '1.2.0');\n+\n+\/\/ Build timestamp (updated automatically by build process)\n+define('SITE_BUILD_TIMESTAMP', '2025-08-09 21:54:48');\n+\n+\/\/ Build number (from Azure DevOps or GitHub Actions)\n+define('SITE_BUILD_NUMBER', '1');\n+\n+\/\/ Git commit hash (if available)\n+define('SITE_GIT_COMMIT', '0b9682a811cf9b47587ba19fed5e2259dcb85559');\n+\n+\/**\n+ * Get formatted build information\n+ *\/\n+function getSiteBuildInfo(): array {\n+    return [\n+        'version' => SITE_VERSION,\n+        'build_number' => SITE_BUILD_NUMBER,\n+        'build_date' => SITE_BUILD_TIMESTAMP,\n+        'git_commit' => SITE_GIT_COMMIT,\n+        'formatted_date' => date('M j, Y \\\\a\\\\t g:i A T', strtotime(SITE_BUILD_TIMESTAMP)),\n+        'short_commit' => substr(SITE_GIT_COMMIT, 0, 7)\n+    ];\n+}\n+\n+\/**\n+ * Get version string for display\n+ *\/\n+function getSiteVersionString(): string {\n+    $info = getSiteBuildInfo();\n+    return \"v{$info['version']}.{$info['build_number']}\";\n+}\n+\n+\/**\n+ * Get full build string for footer\n+ *\/\n+function getSiteBuildString(): string {\n+    $info = getSiteBuildInfo();\n+    if ($info['git_commit'] !== 'unknown') {\n+        return \"v{$info['version']}.{$info['build_number']} ({$info['short_commit']}) - Built on {$info['formatted_date']}\";\n+    } else {\n+        return \"v{$info['version']}.{$info['build_number']} - Built on {$info['formatted_date']}\";\n+    }\n+}\n+?>\n\\ No newline at end of file"},{"sha":"9f9b2b8d3e2ef90351ddada1fcdb42e776889e71","filename":"website\/layout.php","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/website%2Flayout.php","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/website%2Flayout.php","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2Flayout.php?ref=0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","patch":"@@ -106,6 +106,11 @@\n             <div class=\"row mt-3\">\n                 <div class=\"col-12 text-center\">\n                     <small>\u00a9 <?php echo date('Y'); ?> <?php echo e(PHPSPARK_AUTHOR); ?>. Released under the MIT License. <a href=\"\/LICENSE\" class=\"text-decoration-underline text-light\">View License<\/a>.<\/small>\n+                    <br>\n+                    <small class=\"text-muted\">\n+                        <i class=\"bi bi-code-square me-1\"><\/i>\n+                        <?php echo e(getSiteBuildString()); ?>\n+                    <\/small>\n                 <\/div>\n             <\/div>\n         <\/div>"},{"sha":"abd514141d99bab5df17f7f95b7b9d84e34e35ec","filename":"website\/test_version.php","status":"added","additions":25,"deletions":0,"changes":25,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/website%2Ftest_version.php","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e\/website%2Ftest_version.php","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2Ftest_version.php?ref=0add8c5d62aa0ddc3bf36c0c7d3baaa164b09d1e","patch":"@@ -0,0 +1,25 @@\n+<?php\n+require_once 'includes\/config.php';\n+\n+echo \"<h1>Version Information Test<\/h1>\";\n+\n+echo \"<h2>Raw Version Data<\/h2>\";\n+echo \"<ul>\";\n+echo \"<li>SITE_VERSION: \" . SITE_VERSION . \"<\/li>\";\n+echo \"<li>SITE_BUILD_TIMESTAMP: \" . SITE_BUILD_TIMESTAMP . \"<\/li>\";\n+echo \"<li>SITE_BUILD_NUMBER: \" . SITE_BUILD_NUMBER . \"<\/li>\";\n+echo \"<li>SITE_GIT_COMMIT: \" . SITE_GIT_COMMIT . \"<\/li>\";\n+echo \"<\/ul>\";\n+\n+echo \"<h2>Formatted Version Functions<\/h2>\";\n+echo \"<ul>\";\n+echo \"<li>getSiteVersionString(): \" . getSiteVersionString() . \"<\/li>\";\n+echo \"<li>getSiteBuildString(): \" . getSiteBuildString() . \"<\/li>\";\n+echo \"<\/ul>\";\n+\n+echo \"<h2>Build Info Array<\/h2>\";\n+$buildInfo = getSiteBuildInfo();\n+echo \"<pre>\";\n+print_r($buildInfo);\n+echo \"<\/pre>\";\n+?>"}]}},{"sha":"0b9682a811cf9b47587ba19fed5e2259dcb85559","node_id":"C_kwDOKRGycNoAKDBiOTY4MmE4MTFjZjliNDc1ODdiYTE5ZmVkNWUyMjU5ZGNiODU1NTk","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:50:27Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:50:27Z"},"message":"Enhance JavaScript routing in index.html for better URL handling; update Parsedown.php method signatures to support nullable parameters","tree":{"sha":"8071c7c5fdc26a1bb1a4d6d8f7eaeddb7766a77f","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/8071c7c5fdc26a1bb1a4d6d8f7eaeddb7766a77f"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/0b9682a811cf9b47587ba19fed5e2259dcb85559","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0b9682a811cf9b47587ba19fed5e2259dcb85559","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0b9682a811cf9b47587ba19fed5e2259dcb85559","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0b9682a811cf9b47587ba19fed5e2259dcb85559\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f"}],"details":{"sha":"0b9682a811cf9b47587ba19fed5e2259dcb85559","node_id":"C_kwDOKRGycNoAKDBiOTY4MmE4MTFjZjliNDc1ODdiYTE5ZmVkNWUyMjU5ZGNiODU1NTk","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:50:27Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:50:27Z"},"message":"Enhance JavaScript routing in index.html for better URL handling; update Parsedown.php method signatures to support nullable parameters","tree":{"sha":"8071c7c5fdc26a1bb1a4d6d8f7eaeddb7766a77f","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/8071c7c5fdc26a1bb1a4d6d8f7eaeddb7766a77f"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/0b9682a811cf9b47587ba19fed5e2259dcb85559","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0b9682a811cf9b47587ba19fed5e2259dcb85559","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0b9682a811cf9b47587ba19fed5e2259dcb85559","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0b9682a811cf9b47587ba19fed5e2259dcb85559\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f"}],"stats":{"total":69,"additions":57,"deletions":12},"files":[{"sha":"985412d62d62b7306d85095105080ac6e38699e1","filename":"website\/index.html","status":"modified","additions":54,"deletions":9,"changes":63,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0b9682a811cf9b47587ba19fed5e2259dcb85559\/website%2Findex.html","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0b9682a811cf9b47587ba19fed5e2259dcb85559\/website%2Findex.html","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2Findex.html?ref=0b9682a811cf9b47587ba19fed5e2259dcb85559","patch":"@@ -1,37 +1,82 @@\n <!doctype html>\n-<html>\n+<html lang=\"en\">\n   <head>\n     <meta charset=\"UTF-8\" \/>\n-    <title>Redirecting...<\/title>\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" \/>\n+    <title>Loading...<\/title>\n     <script>\n-      \/\/ JavaScript-based routing fallback for Azure App Service\n+      \/\/ Enhanced routing fallback for Azure App Service\n       (function () {\n         const path = window.location.pathname;\n         const search = window.location.search;\n+        const hash = window.location.hash;\n+\n+        console.log('Routing check - Path:', path, 'Search:', search);\n \n         \/\/ If this is a \/doc\/ URL, redirect to index.php with the path as a parameter\n         if (path.match(\/^\\\/doc(\\\/.*)?$\/i)) {\n-          const newUrl = '\/index.php?path=' + encodeURIComponent(path) + search;\n+          const newUrl =\n+            '\/index.php?path=' +\n+            encodeURIComponent(path) +\n+            (search ? '&' + search.substring(1) : '') +\n+            hash;\n+          console.log('Redirecting to:', newUrl);\n           window.location.replace(newUrl);\n           return;\n         }\n \n-        \/\/ For root or other paths, redirect to index.php\n+        \/\/ For root or index.html, redirect to index.php\n         if (path === '\/' || path === '\/index.html') {\n-          window.location.replace('\/index.php' + search);\n+          const newUrl = '\/index.php' + search + hash;\n+          console.log('Home redirect to:', newUrl);\n+          window.location.replace(newUrl);\n           return;\n         }\n \n-        \/\/ Fallback - redirect to index.php with current path\n-        const newUrl = '\/index.php?path=' + encodeURIComponent(path) + search;\n+        \/\/ For any other unmatched paths, try routing through PHP\n+        const newUrl =\n+          '\/index.php?path=' +\n+          encodeURIComponent(path) +\n+          (search ? '&' + search.substring(1) : '') +\n+          hash;\n+        console.log('Fallback redirect to:', newUrl);\n         window.location.replace(newUrl);\n       })();\n     <\/script>\n     <noscript>\n       <meta http-equiv=\"refresh\" content=\"0; url=\/index.php\" \/>\n     <\/noscript>\n+    <style>\n+      body {\n+        font-family: system-ui;\n+        text-align: center;\n+        padding: 50px;\n+        color: #666;\n+      }\n+      .spinner {\n+        border: 2px solid #f3f3f3;\n+        border-top: 2px solid #3498db;\n+        border-radius: 50%;\n+        width: 20px;\n+        height: 20px;\n+        animation: spin 1s linear infinite;\n+        margin: 20px auto;\n+      }\n+      @keyframes spin {\n+        0% {\n+          transform: rotate(0deg);\n+        }\n+        100% {\n+          transform: rotate(360deg);\n+        }\n+      }\n+    <\/style>\n   <\/head>\n   <body>\n-    <p>Redirecting...<\/p>\n+    <div class=\"spinner\"><\/div>\n+    <p>Loading application...<\/p>\n+    <p>\n+      <small>If you're not redirected, <a href=\"\/index.php\">click here<\/a><\/small>\n+    <\/p>\n   <\/body>\n <\/html>"},{"sha":"fb5239d1fd08204f64180ed3e3a226fca30dcfc7","filename":"website\/pages\/Parsedown.php","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0b9682a811cf9b47587ba19fed5e2259dcb85559\/website%2Fpages%2FParsedown.php","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0b9682a811cf9b47587ba19fed5e2259dcb85559\/website%2Fpages%2FParsedown.php","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2Fpages%2FParsedown.php?ref=0b9682a811cf9b47587ba19fed5e2259dcb85559","patch":"@@ -571,7 +571,7 @@ protected function blockHeader($Line)\n     #\n     # List\n \n-    protected function blockList($Line, array $CurrentBlock = null)\n+    protected function blockList($Line, ?array $CurrentBlock = null)\n     {\n         list($name, $pattern) = $Line['text'][0] <= '-' ? array('ul', '[*+-]') : array('ol', '[0-9]{1,9}+[.\\)]');\n \n@@ -808,7 +808,7 @@ protected function blockRule($Line)\n     #\n     # Setext\n \n-    protected function blockSetextHeader($Line, array $Block = null)\n+    protected function blockSetextHeader($Line, ?array $Block = null)\n     {\n         if ( ! isset($Block) or $Block['type'] !== 'Paragraph' or isset($Block['interrupted']))\n         {\n@@ -894,7 +894,7 @@ protected function blockReference($Line)\n     #\n     # Table\n \n-    protected function blockTable($Line, array $Block = null)\n+    protected function blockTable($Line, ?array $Block = null)\n     {\n         if ( ! isset($Block) or $Block['type'] !== 'Paragraph' or isset($Block['interrupted']))\n         {"}]}},{"sha":"0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","node_id":"C_kwDOKRGycNoAKDBmM2JlNDNkNDFmNWQyYmRkNGI3ODcyNTNiNGViMWQ1MjgwMWVjN2Y","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:46:57Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:46:57Z"},"message":"update configuration for custom error pages","tree":{"sha":"45be00a16e838054180318c104156e89d7e0a521","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/45be00a16e838054180318c104156e89d7e0a521"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"acf817aa61f45bd70b861b8ba3005698a91c972f","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/acf817aa61f45bd70b861b8ba3005698a91c972f","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/acf817aa61f45bd70b861b8ba3005698a91c972f"}],"details":{"sha":"0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","node_id":"C_kwDOKRGycNoAKDBmM2JlNDNkNDFmNWQyYmRkNGI3ODcyNTNiNGViMWQ1MjgwMWVjN2Y","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:46:57Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:46:57Z"},"message":"update configuration for custom error pages","tree":{"sha":"45be00a16e838054180318c104156e89d7e0a521","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/45be00a16e838054180318c104156e89d7e0a521"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"acf817aa61f45bd70b861b8ba3005698a91c972f","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/acf817aa61f45bd70b861b8ba3005698a91c972f","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/acf817aa61f45bd70b861b8ba3005698a91c972f"}],"stats":{"total":27,"additions":15,"deletions":12},"files":[{"sha":"4c560d5da44ee72244aa3440f01177111cfad9b5","filename":"azure-pipelines.yml","status":"modified","additions":15,"deletions":12,"changes":27,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f\/azure-pipelines.yml","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f\/azure-pipelines.yml","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/azure-pipelines.yml?ref=0f3be43d41f5d2bdd4b787253b4eb1d52801ec7f","patch":"@@ -86,34 +86,37 @@ stages:\n                 # Configure App Service settings for PHP routing\n                 - task: AzureCLI@2\n                   displayName: 'Configure App Service for Custom Routing'\n+                  continueOnError: true\n                   inputs:\n                     azureSubscription: $(azureSubscription)\n                     scriptType: 'bash'\n                     scriptLocation: 'inlineScript'\n                     inlineScript: |\n+                      echo \"Configuring App Service settings...\"\n+                      \n                       # Enable URL rewriting and configure PHP settings\n                       az webapp config appsettings set \\\n                         --name $(webAppName) \\\n                         --resource-group rg-controlorigins-docs \\\n                         --settings \\\n                           WEBSITE_DYNAMIC_CACHE=0 \\\n                           WEBSITE_LOCAL_CACHE_OPTION=Never \\\n-                          PHP_INI_SCAN_DIR=\"\/usr\/local\/etc\/php\/conf.d:\/home\/site\"\n+                          PHP_INI_SCAN_DIR=\"\/usr\/local\/etc\/php\/conf.d:\/home\/site\" \\\n+                          WEBSITE_RUN_FROM_PACKAGE=0 \\\n+                        || echo \"Failed to set app settings\"\n \n-                      # Configure the router as startup file and set routing mode\n+                      # Configure the router as startup file\n                       az webapp config set \\\n                         --name $(webAppName) \\\n                         --resource-group rg-controlorigins-docs \\\n                         --startup-file \"router.php\" \\\n-                        --linux-fx-version \"PHP|8.4\"\n-\n-                      # Set additional configuration for PHP routing\n-                      az webapp config appsettings set \\\n-                        --name $(webAppName) \\\n-                        --resource-group rg-controlorigins-docs \\\n-                        --settings \\\n-                          WEBSITE_ROLE_INSTANCE_ID=0 \\\n-                          WEBSITE_HTTPLOGGING_RETENTION_DAYS=3\n+                        --linux-fx-version \"PHP|8.4\" \\\n+                        || echo \"Failed to set startup config\"\n                           \n                       # Restart the app to apply settings\n-                      az webapp restart --name $(webAppName) --resource-group rg-controlorigins-docs\n+                      az webapp restart \\\n+                        --name $(webAppName) \\\n+                        --resource-group rg-controlorigins-docs \\\n+                        || echo \"Failed to restart app\"\n+                      \n+                      echo \"Configuration completed\""}]}},{"sha":"acf817aa61f45bd70b861b8ba3005698a91c972f","node_id":"C_kwDOKRGycNoAKGFjZjgxN2FhNjFmNDViZDcwYjg2MWI4YmEzMDA1Njk4YTkxYzk3MmY","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:39:50Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:39:50Z"},"message":"Implement custom 404 handler and JavaScript routing for Azure App Service; update Azure pipeline configuration","tree":{"sha":"753b9f3afcc755cb74ddf89b5adac2f6f186f2fc","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/753b9f3afcc755cb74ddf89b5adac2f6f186f2fc"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/acf817aa61f45bd70b861b8ba3005698a91c972f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/acf817aa61f45bd70b861b8ba3005698a91c972f","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/acf817aa61f45bd70b861b8ba3005698a91c972f","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/acf817aa61f45bd70b861b8ba3005698a91c972f\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"e85f0f819057825260a0642aaec6f579b83aa7da","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/e85f0f819057825260a0642aaec6f579b83aa7da","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/e85f0f819057825260a0642aaec6f579b83aa7da"}],"details":{"sha":"acf817aa61f45bd70b861b8ba3005698a91c972f","node_id":"C_kwDOKRGycNoAKGFjZjgxN2FhNjFmNDViZDcwYjg2MWI4YmEzMDA1Njk4YTkxYzk3MmY","commit":{"author":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:39:50Z"},"committer":{"name":"Mark Hazleton","email":"mark.hazleton@controlorigins.com","date":"2025-08-09T21:39:50Z"},"message":"Implement custom 404 handler and JavaScript routing for Azure App Service; update Azure pipeline configuration","tree":{"sha":"753b9f3afcc755cb74ddf89b5adac2f6f186f2fc","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/trees\/753b9f3afcc755cb74ddf89b5adac2f6f186f2fc"},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/git\/commits\/acf817aa61f45bd70b861b8ba3005698a91c972f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/acf817aa61f45bd70b861b8ba3005698a91c972f","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/acf817aa61f45bd70b861b8ba3005698a91c972f","comments_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/acf817aa61f45bd70b861b8ba3005698a91c972f\/comments","author":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"e85f0f819057825260a0642aaec6f579b83aa7da","url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/commits\/e85f0f819057825260a0642aaec6f579b83aa7da","html_url":"https:\/\/github.com\/controlorigins\/documents\/commit\/e85f0f819057825260a0642aaec6f579b83aa7da"}],"stats":{"total":154,"additions":148,"deletions":6},"files":[{"sha":"284d8ac955dac6a56290afb08e997f2579de955c","filename":"azure-pipelines.yml","status":"modified","additions":10,"deletions":6,"changes":16,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/acf817aa61f45bd70b861b8ba3005698a91c972f\/azure-pipelines.yml","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/acf817aa61f45bd70b861b8ba3005698a91c972f\/azure-pipelines.yml","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/azure-pipelines.yml?ref=acf817aa61f45bd70b861b8ba3005698a91c972f","patch":"@@ -1,6 +1,10 @@\n # PHP as Linux Web App on Azure\n-# Build, package and deploy your PHP project to Azure Linux Web App.\n-# Add steps that run tests and more:\n+# Build, package and deploy your PHP project to Azure Linux Web A                      # Configure the router as startup file and set routing mode\n+                      az webapp config set \\\n+                        --name $(webAppName) \\\n+                        --resource-group rg-controlorigins-docs \\\n+                        --startup-file \"router.php\" \\\n+                        --linux-fx-version \"PHP|8.4\" Add steps that run tests and more:\n # https:\/\/docs.microsoft.com\/azure\/devops\/pipelines\/languages\/php\n \n trigger:\n@@ -90,7 +94,7 @@ stages:\n                       # Enable URL rewriting and configure PHP settings\n                       az webapp config appsettings set \\\n                         --name $(webAppName) \\\n-                        --resource-group controlorigins-docs \\\n+                        --resource-group rg-controlorigins-docs \\\n                         --settings \\\n                           WEBSITE_DYNAMIC_CACHE=0 \\\n                           WEBSITE_LOCAL_CACHE_OPTION=Never \\\n@@ -99,17 +103,17 @@ stages:\n                       # Configure the router as startup file and set routing mode\n                       az webapp config set \\\n                         --name $(webAppName) \\\n-                        --resource-group controlorigins-docs \\\n+                        --resource-group rg-controlorigins-docs \\\n                         --startup-file \"router.php\" \\\n                         --linux-fx-version \"PHP|8.4\"\n \n                       # Set additional configuration for PHP routing\n                       az webapp config appsettings set \\\n                         --name $(webAppName) \\\n-                        --resource-group controlorigins-docs \\\n+                        --resource-group rg-controlorigins-docs \\\n                         --settings \\\n                           WEBSITE_ROLE_INSTANCE_ID=0 \\\n                           WEBSITE_HTTPLOGGING_RETENTION_DAYS=3\n                           \n                       # Restart the app to apply settings\n-                      az webapp restart --name $(webAppName) --resource-group controlorigins-docs\n+                      az webapp restart --name $(webAppName) --resource-group rg-controlorigins-docs"},{"sha":"e898070e8a42fd9559a38c7266578dd5cc03fb43","filename":"website\/404.php","status":"added","additions":96,"deletions":0,"changes":96,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/acf817aa61f45bd70b861b8ba3005698a91c972f\/website%2F404.php","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/acf817aa61f45bd70b861b8ba3005698a91c972f\/website%2F404.php","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2F404.php?ref=acf817aa61f45bd70b861b8ba3005698a91c972f","patch":"@@ -0,0 +1,96 @@\n+<?php\n+\/**\n+ * Custom 404 Handler for Azure App Service\n+ * This handles routing when pretty URLs don't work with Nginx\n+ *\/\n+\n+\/\/ Get the original request\n+$originalUri = $_SERVER['REQUEST_URI'] ?? '\/';\n+$originalPath = parse_url($originalUri, PHP_URL_PATH);\n+\n+\/\/ Log for debugging\n+error_log(\"404 Handler: Original request = $originalUri\");\n+\n+\/\/ Check if this looks like a \/doc\/ URL that should be routed to our app\n+if (preg_match('#^\/doc(?:\/.*)?$#i', $originalPath)) {\n+    \/\/ This is a document URL that should be handled by our application\n+    \/\/ Set up the environment as if this request came directly to index.php\n+    $_SERVER['REQUEST_URI'] = $originalUri;\n+    $_SERVER['SCRIPT_NAME'] = '\/index.php';\n+    $_SERVER['PHP_SELF'] = '\/index.php';\n+    \n+    \/\/ Include our main application\n+    require_once __DIR__ . '\/index.php';\n+    exit;\n+}\n+\n+\/\/ For other 404 errors, show a proper error page\n+http_response_code(404);\n+?>\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta charset=\"UTF-8\">\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n+    <title>Page Not Found - PHPDocSpark<\/title>\n+    <style>\n+        body { \n+            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; \n+            margin: 0; \n+            padding: 40px;\n+            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n+            min-height: 100vh;\n+            color: white;\n+        }\n+        .container { \n+            max-width: 600px; \n+            margin: 0 auto; \n+            text-align: center;\n+            background: rgba(255,255,255,0.1);\n+            padding: 40px;\n+            border-radius: 10px;\n+            backdrop-filter: blur(10px);\n+        }\n+        h1 { color: #fff; margin-bottom: 20px; }\n+        p { font-size: 18px; margin-bottom: 30px; opacity: 0.9; }\n+        .back-link a { \n+            color: #fff; \n+            text-decoration: none; \n+            background: rgba(255,255,255,0.2);\n+            padding: 12px 24px;\n+            border-radius: 5px;\n+            transition: all 0.3s;\n+        }\n+        .back-link a:hover {\n+            background: rgba(255,255,255,0.3);\n+            transform: translateY(-2px);\n+        }\n+        .debug-info {\n+            margin-top: 30px;\n+            text-align: left;\n+            background: rgba(0,0,0,0.2);\n+            padding: 15px;\n+            border-radius: 5px;\n+            font-family: monospace;\n+            font-size: 12px;\n+            opacity: 0.7;\n+        }\n+    <\/style>\n+<\/head>\n+<body>\n+    <div class=\"container\">\n+        <h1>404 - Page Not Found<\/h1>\n+        <p>The page you're looking for doesn't exist or has been moved.<\/p>\n+        <div class=\"back-link\">\n+            <a href=\"\/\">\u2190 Back to Home<\/a>\n+        <\/div>\n+        \n+        <div class=\"debug-info\">\n+            <strong>Request Info:<\/strong><br>\n+            Path: <?= htmlspecialchars($originalPath) ?><br>\n+            URI: <?= htmlspecialchars($originalUri) ?><br>\n+            Timestamp: <?= date('Y-m-d H:i:s') ?>\n+        <\/div>\n+    <\/div>\n+<\/body>\n+<\/html>"},{"sha":"d0de6b2539a7d51f56df6ef8ed06827d0f79ba43","filename":"website\/index.html","status":"added","additions":37,"deletions":0,"changes":37,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/acf817aa61f45bd70b861b8ba3005698a91c972f\/website%2Findex.html","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/acf817aa61f45bd70b861b8ba3005698a91c972f\/website%2Findex.html","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2Findex.html?ref=acf817aa61f45bd70b861b8ba3005698a91c972f","patch":"@@ -0,0 +1,37 @@\n+<!doctype html>\n+<html>\n+  <head>\n+    <meta charset=\"UTF-8\" \/>\n+    <title>Redirecting...<\/title>\n+    <script>\n+      \/\/ JavaScript-based routing fallback for Azure App Service\n+      (function () {\n+        const path = window.location.pathname;\n+        const search = window.location.search;\n+\n+        \/\/ If this is a \/doc\/ URL, redirect to index.php with the path as a parameter\n+        if (path.match(\/^\\\/doc(\\\/.*)?$\/i)) {\n+          const newUrl = '\/index.php?path=' + encodeURIComponent(path) + search;\n+          window.location.replace(newUrl);\n+          return;\n+        }\n+\n+        \/\/ For root or other paths, redirect to index.php\n+        if (path === '\/' || path === '\/index.html') {\n+          window.location.replace('\/index.php' + search);\n+          return;\n+        }\n+\n+        \/\/ Fallback - redirect to index.php with current path\n+        const newUrl = '\/index.php?path=' + encodeURIComponent(path) + search;\n+        window.location.replace(newUrl);\n+      })();\n+    <\/script>\n+    <noscript>\n+      <meta http-equiv=\"refresh\" content=\"0; url=\/index.php\" \/>\n+    <\/noscript>\n+  <\/head>\n+  <body>\n+    <p>Redirecting...<\/p>\n+  <\/body>\n+<\/html>"},{"sha":"32f37b8a84dbfd0efd452f84e65d69dd26db3914","filename":"website\/index.php","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https:\/\/github.com\/controlorigins\/documents\/blob\/acf817aa61f45bd70b861b8ba3005698a91c972f\/website%2Findex.php","raw_url":"https:\/\/github.com\/controlorigins\/documents\/raw\/acf817aa61f45bd70b861b8ba3005698a91c972f\/website%2Findex.php","contents_url":"https:\/\/api.github.com\/repos\/controlorigins\/documents\/contents\/website%2Findex.php?ref=acf817aa61f45bd70b861b8ba3005698a91c972f","patch":"@@ -4,6 +4,11 @@\n require_once __DIR__ . '\/includes\/config.php';\n require_once __DIR__ . '\/includes\/docs.php';\n \n+\/\/ Handle path parameter from JavaScript redirect fallback\n+if (isset($_GET['path'])) {\n+    $_SERVER['REQUEST_URI'] = $_GET['path'] . (isset($_GET['query']) ? '?' . $_GET['query'] : '');\n+}\n+\n $requestPath = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH) ?? '\/';\n $requestPath = preg_replace('#\/+#','\/',$requestPath);\n "}]}}],"contributors":[{"login":"markhazleton","id":223906,"node_id":"MDQ6VXNlcjIyMzkwNg==","avatar_url":"https:\/\/avatars.githubusercontent.com\/u\/223906?v=4","gravatar_id":"","url":"https:\/\/api.github.com\/users\/markhazleton","html_url":"https:\/\/github.com\/markhazleton","followers_url":"https:\/\/api.github.com\/users\/markhazleton\/followers","following_url":"https:\/\/api.github.com\/users\/markhazleton\/following{\/other_user}","gists_url":"https:\/\/api.github.com\/users\/markhazleton\/gists{\/gist_id}","starred_url":"https:\/\/api.github.com\/users\/markhazleton\/starred{\/owner}{\/repo}","subscriptions_url":"https:\/\/api.github.com\/users\/markhazleton\/subscriptions","organizations_url":"https:\/\/api.github.com\/users\/markhazleton\/orgs","repos_url":"https:\/\/api.github.com\/users\/markhazleton\/repos","events_url":"https:\/\/api.github.com\/users\/markhazleton\/events{\/privacy}","received_events_url":"https:\/\/api.github.com\/users\/markhazleton\/received_events","type":"User","user_view_type":"public","site_admin":false,"contributions":97}],"timestamp":1754777826}