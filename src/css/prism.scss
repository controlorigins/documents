// PrismJS CSS imports and customizations
// Import Solarized Light theme - clean, professional theme perfect for Bootstrap
@import "prismjs/themes/prism-solarizedlight";

// Import PrismJS plugin styles
@import "prismjs/plugins/line-numbers/prism-line-numbers";
@import "prismjs/plugins/toolbar/prism-toolbar";

// Custom PrismJS theme enhancements for PHPDocSpark
// Override default theme colors to match Bootstrap 5 theme

// Code block container enhancements
pre[class*="language-"] {
  border-radius: 0.375rem; // Match Bootstrap's border-radius
  border: 1px solid #dee2e6; // Bootstrap's border-color
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); // Subtle shadow like your cards
  background: #ffffff; // Clean white background
  
  // Better spacing and typography to match your design
  margin: 1rem 0;
  padding: 1.5rem;
  font-size: 0.875rem; // 14px
  line-height: 1.6;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
  
  // Smooth scrolling for long code lines
  overflow-x: auto;
  
  // Better mobile experience
  @media (max-width: 768px) {
    font-size: 0.8125rem; // 13px on mobile
    padding: 1rem;
    border-radius: 0.25rem;
  }
}

// Enhanced inline code styling - PHP themed
:not(pre) > code[class*="language-"] {
  background: rgba(143, 146, 191, 0.1); // PHP blue tint
  border: 1px solid rgba(143, 146, 191, 0.2);
  border-radius: 0.25rem;
  padding: 0.125rem 0.375rem;
  font-size: 0.875em;
  color: var(--secondary-color, #4F5B93); // PHP dark blue
}

// Custom color overrides to match PHP website theme
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: var(--text-muted, #6c757d); // Muted text for comments
  font-style: italic;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
  color: #8B0000; // Dark red for tags and constants
}

.token.boolean,
.token.number {
  color: var(--accent-color, #6181B6); // PHP light blue for numbers
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: #2E8B57; // Sea green for strings (complements PHP blue)
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
  color: var(--php-purple, #6f42c1); // Purple for variables
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
  color: #B8860B; // Dark goldenrod for functions (contrasts well with PHP blue)
  font-weight: 500; // Slightly bolder to match your button styling
}

.token.keyword {
  color: var(--primary-color, #8892BF); // PHP main blue for keywords
  font-weight: 600; // Match your button font-weight
}

.token.regex,
.token.important {
  color: #fd7e14; // Bootstrap's orange
  font-weight: 600;
}

// PHP-specific token styling
.language-php {
  .token.delimiter.important {
    color: var(--primary-color, #8892BF); // PHP blue for opening/closing tags
    font-weight: 700;
  }
  
  .token.variable {
    color: var(--php-purple, #6f42c1); // PHP purple for variables ($var)
    font-weight: 500;
  }
  
  .token.function {
    color: #B8860B; // Dark goldenrod for PHP functions
    font-weight: 600;
  }
  
  // Special styling for PHP tags
  .token.php.tag {
    color: var(--secondary-color, #4F5B93);
    font-weight: 700;
  }
}

// JavaScript-specific token styling with PHP theme
.language-javascript {
  .token.keyword.module {
    color: var(--primary-color, #8892BF); // PHP blue for import/export
  }
  
  .token.template-string {
    .token.string {
      color: #2E8B57; // Sea green for template literals
    }
    
    .token.interpolation {
      color: var(--php-purple, #6f42c1); // Purple for ${} expressions
    }
  }
}

// CSS-specific styling
.language-css {
  .token.selector {
    color: var(--primary-color, #8892BF); // PHP blue for selectors
  }
  
  .token.property {
    color: var(--secondary-color, #4F5B93); // Dark blue for properties
  }
}

// Toolbar plugin enhancements - matching PHP theme
div.code-toolbar {
  position: relative;
  
  > .toolbar {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    
    .toolbar-item {
      button {
        background: linear-gradient(135deg, var(--primary-color, #8892BF), var(--secondary-color, #4F5B93));
        border: none;
        color: white;
        padding: 0.375rem 0.75rem; // Match your button padding
        border-radius: 5px; // Match your button border-radius
        font-size: 0.75rem;
        font-weight: 500; // Match your button font-weight
        cursor: pointer;
        transition: all 0.3s ease; // Match your card transition
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        
        &:hover {
          background: linear-gradient(135deg, var(--secondary-color, #4F5B93), var(--accent-color, #6181B6));
          transform: translateY(-2px); // Subtle lift like your cards
          box-shadow: 0 4px 8px rgba(143, 146, 191, 0.3);
        }
        
        &:active {
          transform: translateY(0);
        }
      }
    }
  }
  
  // Fade in/out on hover
  > .toolbar {
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  &:hover > .toolbar {
    opacity: 1;
  }
}

// Line numbers plugin enhancements
pre[class*="language-"].line-numbers {
  position: relative;
  padding-left: 3.8em;
  counter-reset: linenumber;
  
  > code {
    position: relative;
    white-space: inherit;
  }
  
  .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; // Fixed width for alignment
    letter-spacing: -1px;
    border-right: 1px solid #dee2e6;
    -webkit-user-select: none; // Safari support
    user-select: none;
    
    > span {
      pointer-events: none;
      display: block;
      counter-increment: linenumber;
      
      &:before {
        content: counter(linenumber);
        color: #6c757d;
        display: block;
        padding-right: 0.8em;
        text-align: right;
      }
    }
  }
}

// Print-friendly styling
@media print {
  pre[class*="language-"] {
    border: 1px solid #000;
    background: white !important;
    color: black !important;
    box-shadow: none;
  }
  
  .token {
    color: black !important;
  }
  
  div.code-toolbar > .toolbar {
    display: none;
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  pre[class*="language-"] {
    border-width: 2px;
    border-color: #000;
  }
  
  .token {
    font-weight: 600;
  }
}

// Dark mode support (respects user preference)
@media (prefers-color-scheme: dark) {
  pre[class*="language-"] {
    background: #1e1e1e;
    border-color: #404040;
    color: #d4d4d4;
  }
  
  :not(pre) > code[class*="language-"] {
    background: #2d2d2d;
    border-color: #404040;
    color: #d4d4d4;
  }
  
  .token.comment,
  .token.prolog,
  .token.doctype,
  .token.cdata {
    color: #6A9955;
  }
  
  .token.property,
  .token.tag,
  .token.constant,
  .token.symbol,
  .token.deleted {
    color: #F44747;
  }
  
  .token.boolean,
  .token.number {
    color: #B5CEA8;
  }
  
  .token.string,
  .token.char,
  .token.builtin,
  .token.inserted {
    color: #CE9178;
  }
  
  .token.keyword {
    color: #569CD6;
  }
  
  .token.function {
    color: #DCDCAA;
  }
}
